<main class="bg-default-50 w-full h-full flex flex-row items-center p-4 gap-4">
  <div class="container hidden md:flex w-full h-full rounded-4xl">
    <img
      class="w-full h-full aspect-square object-cover rounded-3xl"
      src="https://res.cloudinary.com/dtfdnwkao/image/upload/oc3g6ommnvuksvxzn913?_a=DATAg1AAZAA0"
      srcset="
        https://res.cloudinary.com/dtfdnwkao/image/upload/oc3g6ommnvuksvxzn913?_a=DATAg1AAZAA0
      "
      alt="Sign Up Banner"
    />
  </div>
  <section class="container w-full h-full">
    <form
      [formGroup]="signUpForm"
      (ngSubmit)="onSubmit()"
      class="flex flex-col gap-4 h-full justify-center items-center p-4 md:bg-default-100 rounded-3xl shadow-lg"
    >
      <h1 class="text-4xl font-bold text-default-800">Create Account</h1>
      <p class="text-default-700 mb-2">
        Join ZoneVitae community and connect with others.
      </p>

      <!-- Show error message if registration fails -->
      <div
        *ngIf="error"
        class="w-full max-w-[395px] bg-danger-100 text-danger-600 p-3 rounded-lg"
      >
        {{ error }}
      </div>

      <div class="flex flex-col gap-4 w-full max-w-[395px]">
        <!-- First row: First and Last name -->
        <div class="flex flex-row gap-2">
          <app-input
            [id]="'nombre'"
            [label]="'First Name'"
            formControlName="nombre"
            placeholder="Enter your first name"
            [required]="true"
            [fullWidth]="true"
            [validation]="{
              state:
                submitted && f['nombre'].errors ? 'invalid' : 'undefined',
              message:
                (submitted && f['nombre'].errors?.['required']) ? 'First name is required' :
                (submitted && f['nombre'].errors?.['minlength']) ? 'First name must be at least 2 characters' : ''
            }"
          >
          </app-input>

          <app-input
            [id]="'apellido'"
            [label]="'Last Name'"
            formControlName="apellido"
            placeholder="Enter your last name"
            [required]="true"
            [fullWidth]="true"
            [validation]="{
              state:
                submitted && f['apellido'].errors ? 'invalid' : 'undefined',
              message:
                (submitted && f['apellido'].errors?.['required']) ? 'Last name is required' :
                (submitted && f['apellido'].errors?.['minlength']) ? 'Last name must be at least 2 characters' : ''
            }"
          >
          </app-input>
        </div>

        <app-input
          [id]="'nombre_usuario'"
          [label]="'Username'"
          formControlName="nombre_usuario"
          placeholder="Choose your username"
          [required]="true"
          [fullWidth]="true"
          [validation]="{
            state:
              submitted && f['nombre_usuario'].errors ? 'invalid' : 'undefined',
            message:
              (submitted && f['nombre_usuario'].errors?.['required']) ? 'Username is required' :
              (submitted && f['nombre_usuario'].errors?.['minlength']) ? 'Username must be at least 4 characters' : ''
          }"
        >
        </app-input>

        <app-input
          [id]="'email'"
          [label]="'Email'"
          formControlName="email"
          placeholder="Enter your email"
          [required]="true"
          [fullWidth]="true"
          [validation]="{
            state:
              submitted && f['email'].errors ? 'invalid' : 'undefined',
            message:
              (submitted && f['email'].errors?.['required']) ? 'Email is required' :
              (submitted && f['email'].errors?.['email']) ? 'Please enter a valid email address' : ''
          }"
        >
        </app-input>

        <app-input
          [id]="'password'"
          [label]="'Password'"
          formControlName="password"
          placeholder="Create a password"
          [required]="true"
          [fullWidth]="true"
          [type]="'password'"
          [validation]="{
            state:
              submitted && f['password'].errors ? 'invalid' : 'undefined',
            message:
              (submitted && f['password'].errors?.['required']) ? 'Password is required' :
              (submitted && f['password'].errors?.['minlength']) ? 'Password must be at least 6 characters' : ''
          }"
        >
        </app-input>

        <app-input
          [id]="'confirmPassword'"
          [label]="'Confirm Password'"
          formControlName="confirmPassword"
          placeholder="Confirm your password"
          [required]="true"
          [fullWidth]="true"
          [type]="'password'"
          [validation]="{
            state:
              submitted && (f['confirmPassword'].errors || signUpForm.errors?.['passwordMismatch']) ? 'invalid' : 'undefined',
            message:
              (submitted && f['confirmPassword'].errors?.['required']) ? 'Please confirm your password' :
              (submitted && signUpForm.errors?.['passwordMismatch']) ? 'Passwords do not match' : ''
          }"
        >
        </app-input>
      </div>

      <button
        type="submit"
        [disabled]="loading"
        class="w-full bg-success-400 mt-2 text-white font-semibold rounded-lg p-2 hover:bg-success-300 transition-colors duration-200 max-w-[395px] cursor-pointer flex flex-row items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        <i-lucide [img]="iconSignUp" class="my-icon text-white"></i-lucide>
        {{ loading ? "Creating account..." : "Sign Up" }}
      </button>

      <p class="text-default-800 text-lg">
        Already have an account?
        <a [routerLink]="['/auth/login']" class="text-primary">Login</a>
      </p>
    </form>
  </section>
</main>
